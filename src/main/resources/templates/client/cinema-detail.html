<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/css/libraries.css">
    <link rel="stylesheet" href="/css/client/header.css">
    <link rel="stylesheet" href="/css/client/index.css">
    <link rel="stylesheet" href="/css/client/slide.css">
    <link rel="stylesheet" href="/css/client/content.css">
    <link rel="stylesheet" href="/css/client/footer.css">
    <link rel="stylesheet" href="/css/client/related-movie.css">
    <link rel="stylesheet" href="/css/client/cinema-detail.css">
    <link rel="stylesheet" href="/css/client/count-down.css" />
</head>

<body>
    <div id="header"></div>

    <div class="cinema-details">
        <div class="cinema-detail-container">
            <div class="info-detail-cinema-left">
                <p class="info-cinema-name" id="cinema-name"></p>
                <span class="rating-cinema-parent"><span class="rating-cinema">5</span>&#9733;</span>
                <div class="count-rating-parent">số lượng người dùng đánh giá:<span class="count-rating">23</span></div>
                <div class="info-cinema-image">
                    <img id="cinema-image" src="" alt="">
                </div>
                <div class="info-cinema-introduction" id="cinema-description">
                    <p>

                    </p>
                </div>

                <div class="info-cinema-address">
                    <p>
                        Địa chỉ:
                        <span id="cinema-address"></span>
                    </p>
                </div>

                <div class="info-cinema-hotline">
                    <p>
                        Hotline:
                        <span id="cinema-hotline"></span>
                    </p>
                </div>

                <div class="my-rating">
                    Đánh giá của bạn:
                    <span class="star" data-rating="1">&#9733;</span>
                    <span class="star" data-rating="2">&#9733;</span>
                    <span class="star" data-rating="3">&#9733;</span>
                    <span class="star" data-rating="4">&#9733;</span>
                    <span class="star" data-rating="5">&#9733;</span>
                    <button class="btn-rating">Gửi</button>
                </div>

            </div>

            <div class="info-detail-cinema-right">
                <div class="info-movie-hot">
                    <div class="info-movie-hot-title">PHIM HÓT</div>
                    <div class="info-movie-hot-card">
                        <div class="card-movie card-hot">
                            <div class="card-movie-image">
                                <img src="https://www.elle.vn/wp-content/uploads/2018/11/05/phim-chieu-rap-Kep-hat-de-va-bon-vuong-quoc.jpg"
                                    alt="Movie Poster">
                                <div class="btn-movie">
                                    <button class="detail-movie btn-buy-ticket">MUA VÉ</button>
                                    <button class="detail-movie btn-detail-movie btn-moving-now">CHI TIẾT</button>
                                </div>
                                <div class="rating-container">
                                    <div class="triangle-container">
                                        <div class="movie-rating">
                                            <p class="number-rating">5.0</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="content-card">
                                <div class="title-card">
                                    <p>
                                        Giam cầm quỷ dữ tro ve yeu thuong
                                    </p>
                                    <span class="show-full-name">Giam cầm quỷ dữ tro ve yeu thuong 1</span>
                                </div>
                                <div class="date-card">
                                    <p>27-07-2024</p>
                                </div>
                            </div>

                        </div>
                        <div class="card-movie card-hot">
                            <div class="card-movie-image">
                                <img src="https://www.elle.vn/wp-content/uploads/2018/11/05/phim-chieu-rap-Kep-hat-de-va-bon-vuong-quoc.jpg"
                                    alt="Movie Poster">
                                <div class="btn-movie">
                                    <button class="detail-movie btn-buy-ticket">MUA VÉ</button>
                                    <button class="detail-movie btn-detail-movie btn-moving-now">CHI TIẾT</button>
                                </div>
                                <div class="rating-container">
                                    <div class="triangle-container">
                                        <div class="movie-rating">
                                            <p class="number-rating">5.0</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="content-card">
                                <div class="title-card">
                                    <p>
                                        Giam cầm quỷ dữ tro ve yeu thuong
                                    </p>
                                    <span class="show-full-name">Giam cầm quỷ dữ tro ve yeu thuong 1</span>
                                </div>
                                <div class="date-card">
                                    <p>27-07-2024</p>
                                </div>
                            </div>

                        </div>
                        <div class="card-movie card-hot">
                            <div class="card-movie-image">
                                <img src="https://www.elle.vn/wp-content/uploads/2018/11/05/phim-chieu-rap-Kep-hat-de-va-bon-vuong-quoc.jpg"
                                    alt="Movie Poster">
                                <div class="btn-movie">
                                    <button class="detail-movie btn-buy-ticket">MUA VÉ</button>
                                    <button class="detail-movie btn-detail-movie btn-moving-now">CHI TIẾT</button>
                                </div>
                                <div class="rating-container">
                                    <div class="triangle-container">
                                        <div class="movie-rating">
                                            <p class="number-rating">5.0</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="content-card">
                                <div class="title-card">
                                    <p>
                                        Giam cầm quỷ dữ tro ve yeu thuong
                                    </p>
                                    <span class="show-full-name">Giam cầm quỷ dữ tro ve yeu thuong 1</span>
                                </div>
                                <div class="date-card">
                                    <p>27-07-2024</p>
                                </div>
                            </div>

                        </div>
                        <div class="card-movie card-hot">
                            <div class="card-movie-image">
                                <img src="https://www.elle.vn/wp-content/uploads/2018/11/05/phim-chieu-rap-Kep-hat-de-va-bon-vuong-quoc.jpg"
                                    alt="Movie Poster">
                                <div class="btn-movie">
                                    <button class="detail-movie btn-buy-ticket">MUA VÉ</button>
                                    <button class="detail-movie btn-detail-movie btn-moving-now">CHI TIẾT</button>
                                </div>
                                <div class="rating-container">
                                    <div class="triangle-container">
                                        <div class="movie-rating">
                                            <p class="number-rating">5.0</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="content-card">
                                <div class="title-card">
                                    <p>
                                        Giam cầm quỷ dữ tro ve yeu thuong
                                    </p>
                                    <span class="show-full-name">Giam cầm quỷ dữ tro ve yeu thuong 1</span>
                                </div>
                                <div class="date-card">
                                    <p>27-07-2024</p>
                                </div>
                            </div>

                        </div>
                    </div>

                </div>
                <div id="map" class="map-container">
                </div>
            </div>

        </div>
    </div>

    <div class="count-down-container"></div>

    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/js/all.min.js"></script>
    <script src="/css/bootstrap-5.0.2-dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/client/login.js"></script>
    <script src="/js/client/slide.js"></script>
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

    <script>
        $(document).ready(function () {
            $('#header').load("/header", function () {
                checkAccessToken();
                $.getScript("/js/client/header.js");
            });

            $('.count-down-container').load("/count-down", function () {
                $.getScript("/js/client/count-down.js");
            })
        });

    </script>

    <!-- hien thi map theo toa do -->
    <script>
        function initializeMap(lat, lng) {
            // Khởi tạo bản đồ với tọa độ và mức độ thu phóng
            const map = L.map('map').setView([lat, lng], 13);

            // Thêm lớp bản đồ từ OpenStreetMap
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 19,
                attribution: '© OpenStreetMap'
            }).addTo(map);

            // Thêm marker tại vị trí chỉ định
            L.marker([lat, lng]).addTo(map)
                .bindPopup(`Vị trí: (${lat}, ${lng})`)
                .openPopup();
        }

        // Gọi hàm initializeMap với tọa độ bạn muốn
        initializeMap(21.028511, 105.804817); // Hà Nội, Việt Nam
    </script>
    <!-- chọn sao đánh giá -->
    <script>
        $(document).ready(function () {
            let selectedRating = 0;

            const myRating = $('.my-rating .star');

            myRating.on('mouseover', function () {
                const rating = $(this).data('rating');
                highlightStars(rating);
            });

            myRating.on('mouseout', function () {
                highlightStars(selectedRating);
            });

            myRating.on('click', function () {
                selectedRating = $(this).data('rating');
                setRating(selectedRating);
            });

            function highlightStars(rating) {
                myRating.each(function () {
                    if ($(this).data('rating') <= rating) {
                        $(this).css('color', 'gold');
                    } else {
                        $(this).css('color', 'gray');
                    }
                });
            }

            function setRating(rating) {
                myRating.each(function () {
                    if ($(this).data('rating') <= rating) {
                        $(this).addClass('selected');
                    } else {
                        $(this).removeClass('selected');
                    }
                });
            }
        });
    </script>
    <script>
        $(document).ready(function () {
            var urlParams = new URLSearchParams(window.location.search);
            var cinemaId = urlParams.get('cinema');
            callApiGetCinemaById(cinemaId);
        });

        function callApiGetCinemaById(id) {
            const settings = {
                url: "http://localhost:8080/api/pub/cinema/" + id,
                method: "GET",
                success: function (data) {
                    renderCinemaInfo(data);
                },
                error: function (xhr) {
                    var response = JSON.parse(xhr.responseText);
                    console.log(response.message);
                }
            }
            $.ajax(settings);
        }

        function renderCinemaInfo(cinema) {
            $('#cinema-name').text(cinema.name);
            $('#cinema-image').attr('src', cinema.imageUrl).attr('alt', cinema.name);
            $('#cinema-description').text(cinema.description);
            $('#cinema-address').text(cinema.address);
            $('#cinema-hotline').text(cinema.hotline);
        }
    </script>


</body>

</html>